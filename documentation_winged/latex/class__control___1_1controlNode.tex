\hypertarget{class__control___1_1controlNode}{}\doxysection{\+\_\+control\+\_\+\+::control\+Node Class Reference}
\label{class__control___1_1controlNode}\index{\_control\_::controlNode@{\_control\_::controlNode}}


Funtion that updates the current time when called.  




{\ttfamily \#include $<$control.\+hpp$>$}



Inheritance diagram for \+\_\+control\+\_\+\+::control\+Node\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=206pt]{class__control___1_1controlNode__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for \+\_\+control\+\_\+\+::control\+Node\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class__control___1_1controlNode__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class__control___1_1controlNode_a35a9eb5216f58fb863d29f445c1f71c2}{control\+Node}} (\mbox{\hyperlink{classvehicle__states}{vehicle\+\_\+states}} $\ast$d, \mbox{\hyperlink{structflight__params}{flight\+\_\+params}} $\ast$p, const std\+::string \&global\+\_\+log\+\_\+dir)
\item 
virtual \mbox{\hyperlink{class__control___1_1controlNode_a57242d643b6748c96c05c0432a446962}{$\sim$control\+Node}} ()=default
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class__control___1_1controlNode_a4a476e52910dd2c4f3ef104d533a2579}{control\+\_\+timer\+\_\+callback\+\_\+}} ()
\begin{DoxyCompactList}\small\item\em control\+\_\+timer\+\_\+callback\+\_\+ \end{DoxyCompactList}\item 
double \mbox{\hyperlink{class__control___1_1controlNode_a702c0c6b68a0ee73436c9ed3d29960ac}{get\+\_\+rk4\+\_\+timestep}} ()
\item 
float \mbox{\hyperlink{class__control___1_1controlNode_a083daff8e8c33c6b5d0eda360afb099f}{get\+\_\+min\+\_\+thrust}} ()
\item 
float \mbox{\hyperlink{class__control___1_1controlNode_a84af14c9ed522c6a56c195ea025195c5}{get\+\_\+zero\+\_\+thrust}} ()
\item 
void \mbox{\hyperlink{class__control___1_1controlNode_a0a1d67b6a1bb49526eec4888cba8a377}{update\+Current\+Time}} ()
\begin{DoxyCompactList}\small\item\em Update function for the current time. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class__control___1_1controlNode_af076825f6703814f535a603d82068028}{run}} ()
\begin{DoxyCompactList}\small\item\em Function that runs the control loop. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class__control___1_1controlNode_af98b25f246a7c078956664781eb40037}{compute\+\_\+and\+\_\+publish\+\_\+control}} ()
\begin{DoxyCompactList}\small\item\em Function that computes the control from the control algorithms and publishes them. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class__control___1_1controlNode_a846c4955bb5dc9ca99a1b7760e5e4342}{arm}} ()
\begin{DoxyCompactList}\small\item\em Function to arm the vehicle. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class__control___1_1controlNode_a43791af37844bb1ebe6a18c5004dfa4c}{disarm}} ()
\begin{DoxyCompactList}\small\item\em Function to disarm the vehicle. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class__control___1_1controlNode_ab214c1628e8718a878de7ed1f362d211}{publish\+\_\+offboard\+\_\+control\+\_\+mode}} ()
\begin{DoxyCompactList}\small\item\em Function to publish offboard control mode. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class__control___1_1controlNode_aa8fc21043f07755286e88ee59b7c6dd0}{publish\+\_\+vehicle\+\_\+command}} (uint16\+\_\+t command, float param1=0.\+0, float param2=0.\+0)
\begin{DoxyCompactList}\small\item\em Function to publish vehicle command. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class__control___1_1controlNode_a615b02e2d09e117b457bafa0254f5280}{publish\+\_\+actuator\+\_\+motors}} (const float t1, const float t2, const float t3, const float t4, const float t5, const float t6, const float t7, const float t8)
\begin{DoxyCompactList}\small\item\em Function to publish motor thrust commands. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class__control___1_1controlNode_a1f4b6e9ff4be11fbeee2e2750f8bc213}{debug2screen}} ()
\begin{DoxyCompactList}\small\item\em Function to debug vehicle states to the screen. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::atomic$<$ uint64\+\_\+t $>$ \mbox{\hyperlink{class__control___1_1controlNode_adc16b81c8e6f2b2b8e9bf4d205cde7a4}{timestamp\+\_\+initial\+\_\+}}
\begin{DoxyCompactList}\small\item\em Common synced initial timestamp -\/ synced with control\+Node. \end{DoxyCompactList}\item 
std\+::atomic$<$ double $>$ \mbox{\hyperlink{class__control___1_1controlNode_a75ceef491d12ebec69abea699a43e5dd}{time\+\_\+current\+\_\+}}
\begin{DoxyCompactList}\small\item\em Current time. \end{DoxyCompactList}\item 
rclcpp\+::\+Timer\+Base\+::\+Shared\+Ptr \mbox{\hyperlink{class__control___1_1controlNode_ae0834289a89848b7511ad7fa6583c97d}{control\+\_\+timer\+\_\+}}
\begin{DoxyCompactList}\small\item\em Timer for running the control node at a fixed rate. \end{DoxyCompactList}\item 
rclcpp\+::\+Publisher$<$ px4\+\_\+msgs\+::msg\+::\+Actuator\+Motors $>$\+::Shared\+Ptr \mbox{\hyperlink{class__control___1_1controlNode_a487f66b35f2baf679add313a705a19bf}{publisher\+\_\+actuator\+\_\+motors\+\_\+}}
\begin{DoxyCompactList}\small\item\em Publisher definitions. \end{DoxyCompactList}\item 
rclcpp\+::\+Publisher$<$ px4\+\_\+msgs\+::msg\+::\+Vehicle\+Command $>$\+::Shared\+Ptr \mbox{\hyperlink{class__control___1_1controlNode_a956724d0db45cc5bd00e16358bf0bd21}{publisher\+\_\+vehicle\+\_\+command\+\_\+}}
\item 
rclcpp\+::\+Publisher$<$ px4\+\_\+msgs\+::msg\+::\+Offboard\+Control\+Mode $>$\+::Shared\+Ptr \mbox{\hyperlink{class__control___1_1controlNode_ae89684c2e1f96347a5ea37f38f3375a2}{publisher\+\_\+offboard\+\_\+control\+\_\+mode\+\_\+}}
\item 
uint \mbox{\hyperlink{class__control___1_1controlNode_aae151d2f12114195b1bc784f74eea01c}{offboard\+\_\+flag\+\_\+}}
\item 
bool \mbox{\hyperlink{class__control___1_1controlNode_aad9e7b3e3018bddc6045c61c7324bd37}{disarm\+\_\+info\+\_\+bool\+\_\+}} = false
\item 
\mbox{\hyperlink{classvehicle__states}{vehicle\+\_\+states}} $\ast$ \mbox{\hyperlink{class__control___1_1controlNode_a1ed6625009e5683411b509a3e5ce70ce}{vehicle\+\_\+ptr}}
\item 
\mbox{\hyperlink{structflight__params}{flight\+\_\+params}} $\ast$ \mbox{\hyperlink{class__control___1_1controlNode_a3d39878b49723c126e2cafdf5aae103a}{flight\+\_\+params\+\_\+ptr}}
\item 
\mbox{\hyperlink{control__config_8hpp_a60d9f1817c7a7556d58c21586c6e7c5b}{\+\_\+picked\+\_\+controller\+\_\+}} \mbox{\hyperlink{class__control___1_1controlNode_ae14465b021b82771c818ef5ad4bda0d3}{controller\+\_\+}}
\begin{DoxyCompactList}\small\item\em -\/-\/-\/-\/--- CREATE CONTROLLER OBJECT -\/-\/-\/-\/-\/--- /// \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Funtion that updates the current time when called. 

Definition at line 78 of file control.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class__control___1_1controlNode_a35a9eb5216f58fb863d29f445c1f71c2}\label{class__control___1_1controlNode_a35a9eb5216f58fb863d29f445c1f71c2}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!controlNode@{controlNode}}
\index{controlNode@{controlNode}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{controlNode()}{controlNode()}}
{\footnotesize\ttfamily \+\_\+control\+\_\+\+::control\+Node\+::control\+Node (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classvehicle__states}{vehicle\+\_\+states}} $\ast$}]{d,  }\item[{\mbox{\hyperlink{structflight__params}{flight\+\_\+params}} $\ast$}]{p,  }\item[{const std\+::string \&}]{global\+\_\+log\+\_\+dir }\end{DoxyParamCaption})}

rclcpp\+::\+Node needs a default constructor. Therefore we implement passing of the vehicle states like so Set offboard flag to 0.

Declare the parameter for the control period in milliseconds

Create the timer for the controller and declare it to run at the CONTROL\+\_\+\+RATE specified in flight\+\_\+main\+\_\+params.\+json

Creation of the actuator motors publisher

Creation of the vehicle command publisher

Creation of the offboard control mode publisher

Get the initial time stamp after the setup is done for more accuracy

Print that control node started at initial timestamp

Definition at line 50 of file control.\+cpp.



References control\+\_\+timer\+\_\+, flight\+\_\+params\+::controller\+\_\+rate, flight\+\_\+params\+\_\+ptr, offboard\+\_\+flag\+\_\+, publisher\+\_\+actuator\+\_\+motors\+\_\+, publisher\+\_\+offboard\+\_\+control\+\_\+mode\+\_\+, publisher\+\_\+vehicle\+\_\+command\+\_\+, run(), and timestamp\+\_\+initial\+\_\+.

\mbox{\Hypertarget{class__control___1_1controlNode_a57242d643b6748c96c05c0432a446962}\label{class__control___1_1controlNode_a57242d643b6748c96c05c0432a446962}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!````~controlNode@{$\sim$controlNode}}
\index{````~controlNode@{$\sim$controlNode}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{$\sim$controlNode()}{~controlNode()}}
{\footnotesize\ttfamily virtual \+\_\+control\+\_\+\+::control\+Node\+::$\sim$control\+Node (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class__control___1_1controlNode_a846c4955bb5dc9ca99a1b7760e5e4342}\label{class__control___1_1controlNode_a846c4955bb5dc9ca99a1b7760e5e4342}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!arm@{arm}}
\index{arm@{arm}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{arm()}{arm()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::arm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Function to arm the vehicle. 

Function to arm the vehicle 
\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}


Definition at line 130 of file control.\+cpp.



References ARM\+\_\+\+ACSL\+\_\+\+VEH, and publish\+\_\+vehicle\+\_\+command().



Referenced by run().

\mbox{\Hypertarget{class__control___1_1controlNode_af98b25f246a7c078956664781eb40037}\label{class__control___1_1controlNode_af98b25f246a7c078956664781eb40037}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!compute\_and\_publish\_control@{compute\_and\_publish\_control}}
\index{compute\_and\_publish\_control@{compute\_and\_publish\_control}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{compute\_and\_publish\_control()}{compute\_and\_publish\_control()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::compute\+\_\+and\+\_\+publish\+\_\+control (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Function that computes the control from the control algorithms and publishes them. 

Function that computes the control from the control algorithms and publishes them 
\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}


Definition at line 362 of file control.\+cpp.



References controller\+\_\+, vehicle\+\_\+states\+::get\+\_\+controltime(), vehicle\+\_\+states\+::get\+\_\+pitch(), vehicle\+\_\+states\+::get\+\_\+pitchspeed(), vehicle\+\_\+states\+::get\+\_\+q0(), vehicle\+\_\+states\+::get\+\_\+q1(), vehicle\+\_\+states\+::get\+\_\+q2(), vehicle\+\_\+states\+::get\+\_\+q3(), get\+\_\+rk4\+\_\+timestep(), vehicle\+\_\+states\+::get\+\_\+roll(), vehicle\+\_\+states\+::get\+\_\+rollspeed(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::get\+\_\+t1(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::get\+\_\+t2(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::get\+\_\+t3(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::get\+\_\+t4(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::get\+\_\+t5(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::get\+\_\+t6(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::get\+\_\+t7(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::get\+\_\+t8(), vehicle\+\_\+states\+::get\+\_\+vx(), vehicle\+\_\+states\+::get\+\_\+vy(), vehicle\+\_\+states\+::get\+\_\+vz(), vehicle\+\_\+states\+::get\+\_\+x(), vehicle\+\_\+states\+::get\+\_\+y(), vehicle\+\_\+states\+::get\+\_\+yaw(), vehicle\+\_\+states\+::get\+\_\+yawspeed(), vehicle\+\_\+states\+::get\+\_\+z(), get\+\_\+zero\+\_\+thrust(), PUBLISH\+\_\+\+ACTUATOR, publish\+\_\+actuator\+\_\+motors(), publish\+\_\+offboard\+\_\+control\+\_\+mode(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::run(), \+\_\+qrbp\+\_\+\+::\+\_\+pid\+\_\+omega\+\_\+\+::pid\+\_\+omega\+::update(), and vehicle\+\_\+ptr.



Referenced by run().

\mbox{\Hypertarget{class__control___1_1controlNode_a4a476e52910dd2c4f3ef104d533a2579}\label{class__control___1_1controlNode_a4a476e52910dd2c4f3ef104d533a2579}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!control\_timer\_callback\_@{control\_timer\_callback\_}}
\index{control\_timer\_callback\_@{control\_timer\_callback\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{control\_timer\_callback\_()}{control\_timer\_callback\_()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::control\+\_\+timer\+\_\+callback\+\_\+ (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



control\+\_\+timer\+\_\+callback\+\_\+ 


\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class__control___1_1controlNode_a1f4b6e9ff4be11fbeee2e2750f8bc213}\label{class__control___1_1controlNode_a1f4b6e9ff4be11fbeee2e2750f8bc213}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!debug2screen@{debug2screen}}
\index{debug2screen@{debug2screen}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{debug2screen()}{debug2screen()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::debug2screen (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Function to debug vehicle states to the screen. 

Function to print the vehicle states values to the screen.

Function to debug vehicle states to the screen. 
\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}


Definition at line 202 of file control.\+cpp.



References vehicle\+\_\+states\+::get\+\_\+controltime(), vehicle\+\_\+states\+::get\+\_\+pitch(), vehicle\+\_\+states\+::get\+\_\+pitchspeed(), vehicle\+\_\+states\+::get\+\_\+q0(), vehicle\+\_\+states\+::get\+\_\+q1(), vehicle\+\_\+states\+::get\+\_\+q2(), vehicle\+\_\+states\+::get\+\_\+q3(), vehicle\+\_\+states\+::get\+\_\+roll(), vehicle\+\_\+states\+::get\+\_\+rollspeed(), vehicle\+\_\+states\+::get\+\_\+vx(), vehicle\+\_\+states\+::get\+\_\+vy(), vehicle\+\_\+states\+::get\+\_\+x(), vehicle\+\_\+states\+::get\+\_\+y(), vehicle\+\_\+states\+::get\+\_\+yaw(), vehicle\+\_\+states\+::get\+\_\+yawspeed(), vehicle\+\_\+states\+::get\+\_\+z(), and vehicle\+\_\+ptr.

\mbox{\Hypertarget{class__control___1_1controlNode_a43791af37844bb1ebe6a18c5004dfa4c}\label{class__control___1_1controlNode_a43791af37844bb1ebe6a18c5004dfa4c}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!disarm@{disarm}}
\index{disarm@{disarm}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{disarm()}{disarm()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::disarm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Function to disarm the vehicle. 

Function to disarm the vehicle 
\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}


Definition at line 138 of file control.\+cpp.



References DISARM\+\_\+\+ACSL\+\_\+\+VEH, disarm\+\_\+info\+\_\+bool\+\_\+, and publish\+\_\+vehicle\+\_\+command().



Referenced by run().

\mbox{\Hypertarget{class__control___1_1controlNode_a083daff8e8c33c6b5d0eda360afb099f}\label{class__control___1_1controlNode_a083daff8e8c33c6b5d0eda360afb099f}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!get\_min\_thrust@{get\_min\_thrust}}
\index{get\_min\_thrust@{get\_min\_thrust}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{get\_min\_thrust()}{get\_min\_thrust()}}
{\footnotesize\ttfamily float \+\_\+control\+\_\+\+::control\+Node\+::get\+\_\+min\+\_\+thrust (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 231 of file control.\+cpp.



References flight\+\_\+params\+\_\+ptr, and flight\+\_\+params\+::min\+\_\+thrust\+\_\+after\+\_\+arm.



Referenced by run().

\mbox{\Hypertarget{class__control___1_1controlNode_a702c0c6b68a0ee73436c9ed3d29960ac}\label{class__control___1_1controlNode_a702c0c6b68a0ee73436c9ed3d29960ac}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!get\_rk4\_timestep@{get\_rk4\_timestep}}
\index{get\_rk4\_timestep@{get\_rk4\_timestep}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{get\_rk4\_timestep()}{get\_rk4\_timestep()}}
{\footnotesize\ttfamily double \+\_\+control\+\_\+\+::control\+Node\+::get\+\_\+rk4\+\_\+timestep (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 226 of file control.\+cpp.



References flight\+\_\+params\+::controller\+\_\+rate, and flight\+\_\+params\+\_\+ptr.



Referenced by compute\+\_\+and\+\_\+publish\+\_\+control().

\mbox{\Hypertarget{class__control___1_1controlNode_a84af14c9ed522c6a56c195ea025195c5}\label{class__control___1_1controlNode_a84af14c9ed522c6a56c195ea025195c5}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!get\_zero\_thrust@{get\_zero\_thrust}}
\index{get\_zero\_thrust@{get\_zero\_thrust}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{get\_zero\_thrust()}{get\_zero\_thrust()}}
{\footnotesize\ttfamily float \+\_\+control\+\_\+\+::control\+Node\+::get\+\_\+zero\+\_\+thrust (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 236 of file control.\+cpp.



References MOTOR\+\_\+\+ZERO\+\_\+\+THRUST.



Referenced by compute\+\_\+and\+\_\+publish\+\_\+control(), and run().

\mbox{\Hypertarget{class__control___1_1controlNode_a615b02e2d09e117b457bafa0254f5280}\label{class__control___1_1controlNode_a615b02e2d09e117b457bafa0254f5280}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!publish\_actuator\_motors@{publish\_actuator\_motors}}
\index{publish\_actuator\_motors@{publish\_actuator\_motors}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{publish\_actuator\_motors()}{publish\_actuator\_motors()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::publish\+\_\+actuator\+\_\+motors (\begin{DoxyParamCaption}\item[{const float}]{t1,  }\item[{const float}]{t2,  }\item[{const float}]{t3,  }\item[{const float}]{t4,  }\item[{const float}]{t5,  }\item[{const float}]{t6,  }\item[{const float}]{t7,  }\item[{const float}]{t8 }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Function to publish motor thrust commands. 

Function to publish motor thrust commands Construct the message

Definition at line 167 of file control.\+cpp.



References publisher\+\_\+actuator\+\_\+motors\+\_\+.



Referenced by compute\+\_\+and\+\_\+publish\+\_\+control(), and run().

\mbox{\Hypertarget{class__control___1_1controlNode_ab214c1628e8718a878de7ed1f362d211}\label{class__control___1_1controlNode_ab214c1628e8718a878de7ed1f362d211}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!publish\_offboard\_control\_mode@{publish\_offboard\_control\_mode}}
\index{publish\_offboard\_control\_mode@{publish\_offboard\_control\_mode}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{publish\_offboard\_control\_mode()}{publish\_offboard\_control\_mode()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::publish\+\_\+offboard\+\_\+control\+\_\+mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Function to publish offboard control mode. 

Function to publish offboard control mode 
\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}
Construct the message

Definition at line 146 of file control.\+cpp.



References OFFBOARD\+\_\+\+ACCEL\+\_\+\+CTRL\+\_\+\+BOOL, OFFBOARD\+\_\+\+ATT\+\_\+\+CTRL\+\_\+\+BOOL, OFFBOARD\+\_\+\+BODY\+\_\+\+RATE\+\_\+\+CTRL\+\_\+\+BOOL, OFFBOARD\+\_\+\+DIRECT\+\_\+\+ACT\+\_\+\+CTRL\+\_\+\+BOOL, OFFBOARD\+\_\+\+POS\+\_\+\+CTRL\+\_\+\+BOOL, OFFBOARD\+\_\+\+THRST\+\_\+\+TRQ\+\_\+\+CTRL\+\_\+\+BOOL, OFFBOARD\+\_\+\+VEL\+\_\+\+CTRL\+\_\+\+BOOL, and publisher\+\_\+offboard\+\_\+control\+\_\+mode\+\_\+.



Referenced by compute\+\_\+and\+\_\+publish\+\_\+control(), and run().

\mbox{\Hypertarget{class__control___1_1controlNode_aa8fc21043f07755286e88ee59b7c6dd0}\label{class__control___1_1controlNode_aa8fc21043f07755286e88ee59b7c6dd0}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!publish\_vehicle\_command@{publish\_vehicle\_command}}
\index{publish\_vehicle\_command@{publish\_vehicle\_command}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{publish\_vehicle\_command()}{publish\_vehicle\_command()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::publish\+\_\+vehicle\+\_\+command (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{command,  }\item[{float}]{param1 = {\ttfamily 0.0},  }\item[{float}]{param2 = {\ttfamily 0.0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Function to publish vehicle command. 

Function to publish vehicle comman

switches to offboard mode and arms the vehicle


\begin{DoxyParams}{Parameters}
{\em command} & \\
\hline
{\em param1} & \\
\hline
{\em param2} & \\
\hline
\end{DoxyParams}
Construct the message

Definition at line 108 of file control.\+cpp.



References FROM\+\_\+\+EXTERNAL\+\_\+\+BOOL, publisher\+\_\+vehicle\+\_\+command\+\_\+, SOURCE\+\_\+\+COMPONENT, SOURCE\+\_\+\+SYSTEM, TARGET\+\_\+\+COMPONENT, and TARGET\+\_\+\+SYSTEM.



Referenced by arm(), disarm(), and run().

\mbox{\Hypertarget{class__control___1_1controlNode_af076825f6703814f535a603d82068028}\label{class__control___1_1controlNode_af076825f6703814f535a603d82068028}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!run@{run}}
\index{run@{run}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Function that runs the control loop. 

Definition of the run loop.

Function that runs the control loop 
\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}
Update the current time at the beginning of every loop

Definition at line 246 of file control.\+cpp.



References arm(), flight\+\_\+params\+::arm\+\_\+time, compute\+\_\+and\+\_\+publish\+\_\+control(), CUSTOM\+\_\+\+MAIN\+\_\+\+MODE\+\_\+\+OFFBOARD, disarm(), ENABLE\+\_\+\+CUSTOM\+\_\+\+MODE, flight\+\_\+params\+::end\+\_\+time, flight\+\_\+params\+\_\+ptr, \+\_\+flightstack\+\_\+\+::\+FLIGHTSTACK\+\_\+\+ERROR(), get\+\_\+min\+\_\+thrust(), get\+\_\+zero\+\_\+thrust(), offboard\+\_\+flag\+\_\+, PUBLISH\+\_\+\+ACTUATOR, publish\+\_\+actuator\+\_\+motors(), publish\+\_\+offboard\+\_\+control\+\_\+mode(), publish\+\_\+vehicle\+\_\+command(), flight\+\_\+params\+::start\+\_\+time, time\+\_\+current\+\_\+, and update\+Current\+Time().



Referenced by control\+Node().

\mbox{\Hypertarget{class__control___1_1controlNode_a0a1d67b6a1bb49526eec4888cba8a377}\label{class__control___1_1controlNode_a0a1d67b6a1bb49526eec4888cba8a377}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!updateCurrentTime@{updateCurrentTime}}
\index{updateCurrentTime@{updateCurrentTime}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{updateCurrentTime()}{updateCurrentTime()}}
{\footnotesize\ttfamily void \+\_\+control\+\_\+\+::control\+Node\+::update\+Current\+Time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Update function for the current time. 

Update function for the current time 
\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}


Definition at line 95 of file control.\+cpp.



References \+\_\+flightstack\+\_\+\+::\+FLIGHTSTACK\+\_\+\+INFO\+\_\+\+STREAM\+\_\+\+NO\+\_\+\+TAG(), vehicle\+\_\+states\+::set\+\_\+controltime(), time\+\_\+current\+\_\+, timestamp\+\_\+initial\+\_\+, and vehicle\+\_\+ptr.



Referenced by run().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class__control___1_1controlNode_ae0834289a89848b7511ad7fa6583c97d}\label{class__control___1_1controlNode_ae0834289a89848b7511ad7fa6583c97d}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!control\_timer\_@{control\_timer\_}}
\index{control\_timer\_@{control\_timer\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{control\_timer\_}{control\_timer\_}}
{\footnotesize\ttfamily rclcpp\+::\+Timer\+Base\+::\+Shared\+Ptr \+\_\+control\+\_\+\+::control\+Node\+::control\+\_\+timer\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Timer for running the control node at a fixed rate. 



Definition at line 114 of file control.\+hpp.



Referenced by control\+Node().

\mbox{\Hypertarget{class__control___1_1controlNode_ae14465b021b82771c818ef5ad4bda0d3}\label{class__control___1_1controlNode_ae14465b021b82771c818ef5ad4bda0d3}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!controller\_@{controller\_}}
\index{controller\_@{controller\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{controller\_}{controller\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{control__config_8hpp_a60d9f1817c7a7556d58c21586c6e7c5b}{\+\_\+picked\+\_\+controller\+\_\+}} \+\_\+control\+\_\+\+::control\+Node\+::controller\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



-\/-\/-\/-\/--- CREATE CONTROLLER OBJECT -\/-\/-\/-\/-\/--- /// 



Definition at line 205 of file control.\+hpp.



Referenced by compute\+\_\+and\+\_\+publish\+\_\+control().

\mbox{\Hypertarget{class__control___1_1controlNode_aad9e7b3e3018bddc6045c61c7324bd37}\label{class__control___1_1controlNode_aad9e7b3e3018bddc6045c61c7324bd37}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!disarm\_info\_bool\_@{disarm\_info\_bool\_}}
\index{disarm\_info\_bool\_@{disarm\_info\_bool\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{disarm\_info\_bool\_}{disarm\_info\_bool\_}}
{\footnotesize\ttfamily bool \+\_\+control\+\_\+\+::control\+Node\+::disarm\+\_\+info\+\_\+bool\+\_\+ = false\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 126 of file control.\+hpp.



Referenced by disarm().

\mbox{\Hypertarget{class__control___1_1controlNode_a3d39878b49723c126e2cafdf5aae103a}\label{class__control___1_1controlNode_a3d39878b49723c126e2cafdf5aae103a}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!flight\_params\_ptr@{flight\_params\_ptr}}
\index{flight\_params\_ptr@{flight\_params\_ptr}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{flight\_params\_ptr}{flight\_params\_ptr}}
{\footnotesize\ttfamily \mbox{\hyperlink{structflight__params}{flight\+\_\+params}}$\ast$ \+\_\+control\+\_\+\+::control\+Node\+::flight\+\_\+params\+\_\+ptr\hspace{0.3cm}{\ttfamily [private]}}

Instance of the flight\+\_\+params\+\_\+ptr to point to the flight\+\_\+parameter object in flight\+\_\+main.\+cpp 

Definition at line 195 of file control.\+hpp.



Referenced by control\+Node(), get\+\_\+min\+\_\+thrust(), get\+\_\+rk4\+\_\+timestep(), and run().

\mbox{\Hypertarget{class__control___1_1controlNode_aae151d2f12114195b1bc784f74eea01c}\label{class__control___1_1controlNode_aae151d2f12114195b1bc784f74eea01c}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!offboard\_flag\_@{offboard\_flag\_}}
\index{offboard\_flag\_@{offboard\_flag\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{offboard\_flag\_}{offboard\_flag\_}}
{\footnotesize\ttfamily uint \+\_\+control\+\_\+\+::control\+Node\+::offboard\+\_\+flag\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 124 of file control.\+hpp.



Referenced by control\+Node(), and run().

\mbox{\Hypertarget{class__control___1_1controlNode_a487f66b35f2baf679add313a705a19bf}\label{class__control___1_1controlNode_a487f66b35f2baf679add313a705a19bf}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!publisher\_actuator\_motors\_@{publisher\_actuator\_motors\_}}
\index{publisher\_actuator\_motors\_@{publisher\_actuator\_motors\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{publisher\_actuator\_motors\_}{publisher\_actuator\_motors\_}}
{\footnotesize\ttfamily rclcpp\+::\+Publisher$<$px4\+\_\+msgs\+::msg\+::\+Actuator\+Motors$>$\+::Shared\+Ptr \+\_\+control\+\_\+\+::control\+Node\+::publisher\+\_\+actuator\+\_\+motors\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Publisher definitions. 



Definition at line 118 of file control.\+hpp.



Referenced by control\+Node(), and publish\+\_\+actuator\+\_\+motors().

\mbox{\Hypertarget{class__control___1_1controlNode_ae89684c2e1f96347a5ea37f38f3375a2}\label{class__control___1_1controlNode_ae89684c2e1f96347a5ea37f38f3375a2}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!publisher\_offboard\_control\_mode\_@{publisher\_offboard\_control\_mode\_}}
\index{publisher\_offboard\_control\_mode\_@{publisher\_offboard\_control\_mode\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{publisher\_offboard\_control\_mode\_}{publisher\_offboard\_control\_mode\_}}
{\footnotesize\ttfamily rclcpp\+::\+Publisher$<$px4\+\_\+msgs\+::msg\+::\+Offboard\+Control\+Mode$>$\+::Shared\+Ptr \+\_\+control\+\_\+\+::control\+Node\+::publisher\+\_\+offboard\+\_\+control\+\_\+mode\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 122 of file control.\+hpp.



Referenced by control\+Node(), and publish\+\_\+offboard\+\_\+control\+\_\+mode().

\mbox{\Hypertarget{class__control___1_1controlNode_a956724d0db45cc5bd00e16358bf0bd21}\label{class__control___1_1controlNode_a956724d0db45cc5bd00e16358bf0bd21}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!publisher\_vehicle\_command\_@{publisher\_vehicle\_command\_}}
\index{publisher\_vehicle\_command\_@{publisher\_vehicle\_command\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{publisher\_vehicle\_command\_}{publisher\_vehicle\_command\_}}
{\footnotesize\ttfamily rclcpp\+::\+Publisher$<$px4\+\_\+msgs\+::msg\+::\+Vehicle\+Command$>$\+::Shared\+Ptr \+\_\+control\+\_\+\+::control\+Node\+::publisher\+\_\+vehicle\+\_\+command\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 120 of file control.\+hpp.



Referenced by control\+Node(), and publish\+\_\+vehicle\+\_\+command().

\mbox{\Hypertarget{class__control___1_1controlNode_a75ceef491d12ebec69abea699a43e5dd}\label{class__control___1_1controlNode_a75ceef491d12ebec69abea699a43e5dd}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!time\_current\_@{time\_current\_}}
\index{time\_current\_@{time\_current\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{time\_current\_}{time\_current\_}}
{\footnotesize\ttfamily std\+::atomic$<$double$>$ \+\_\+control\+\_\+\+::control\+Node\+::time\+\_\+current\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Current time. 



Definition at line 104 of file control.\+hpp.



Referenced by run(), and update\+Current\+Time().

\mbox{\Hypertarget{class__control___1_1controlNode_adc16b81c8e6f2b2b8e9bf4d205cde7a4}\label{class__control___1_1controlNode_adc16b81c8e6f2b2b8e9bf4d205cde7a4}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!timestamp\_initial\_@{timestamp\_initial\_}}
\index{timestamp\_initial\_@{timestamp\_initial\_}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{timestamp\_initial\_}{timestamp\_initial\_}}
{\footnotesize\ttfamily std\+::atomic$<$uint64\+\_\+t$>$ \+\_\+control\+\_\+\+::control\+Node\+::timestamp\+\_\+initial\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Common synced initial timestamp -\/ synced with control\+Node. 



Definition at line 101 of file control.\+hpp.



Referenced by control\+Node(), and update\+Current\+Time().

\mbox{\Hypertarget{class__control___1_1controlNode_a1ed6625009e5683411b509a3e5ce70ce}\label{class__control___1_1controlNode_a1ed6625009e5683411b509a3e5ce70ce}} 
\index{\_control\_::controlNode@{\_control\_::controlNode}!vehicle\_ptr@{vehicle\_ptr}}
\index{vehicle\_ptr@{vehicle\_ptr}!\_control\_::controlNode@{\_control\_::controlNode}}
\doxysubsubsection{\texorpdfstring{vehicle\_ptr}{vehicle\_ptr}}
{\footnotesize\ttfamily \mbox{\hyperlink{classvehicle__states}{vehicle\+\_\+states}}$\ast$ \+\_\+control\+\_\+\+::control\+Node\+::vehicle\+\_\+ptr\hspace{0.3cm}{\ttfamily [private]}}

Instance of the vehicle\+\_\+ptr to point to the vehicle state object in flight\+\_\+bridge.\+cpp 

Definition at line 191 of file control.\+hpp.



Referenced by compute\+\_\+and\+\_\+publish\+\_\+control(), debug2screen(), and update\+Current\+Time().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
ACSL-\/flightstack-\/winged/src/acsl\+\_\+flight/include/control/\mbox{\hyperlink{control_8hpp}{control.\+hpp}}\item 
ACSL-\/flightstack-\/winged/src/acsl\+\_\+flight/src/control/\mbox{\hyperlink{control_8cpp}{control.\+cpp}}\end{DoxyCompactItemize}
