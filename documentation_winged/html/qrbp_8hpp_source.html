<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACSL Flightstack-winged Documentation: ACSL-flightstack-winged/src/acsl_flight/include/control/platforms/qrbp/qrbp.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ACSL Flightstack-winged Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d74ed35c2e1515ba96c1bba6c01deae3.html">ACSL-flightstack-winged</a></li><li class="navelem"><a class="el" href="dir_2133a1c1918d056891506a58d7630a3f.html">src</a></li><li class="navelem"><a class="el" href="dir_a964ec745bb3c23b753cfa036932779d.html">acsl_flight</a></li><li class="navelem"><a class="el" href="dir_b59d6e0e1db631c1aaa97e9d05ec23c1.html">include</a></li><li class="navelem"><a class="el" href="dir_16b06bd99d94bcbd51e36f39541e14af.html">control</a></li><li class="navelem"><a class="el" href="dir_b0206072910f6abc79eb007ee8e44bd4.html">platforms</a></li><li class="navelem"><a class="el" href="dir_ae85358b1933238a0a6154cc32e219b9.html">qrbp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qrbp.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qrbp_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">________/\\\__________/\\\\\\\\\______/\\\\\\\\\\\\\____/\\\\\\\\\\\\\___        </span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> _____/\\\\/\\\\_____/\\\///////\\\___\/\\\/////////\\\_\/\\\/////////\\\_       </span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">  ___/\\\//\////\\\__\/\\\_____\/\\\___\/\\\_______\/\\\_\/\\\_______\/\\\_      </span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">   __/\\\______\//\\\_\/\\\\\\\\\\\/____\/\\\\\\\\\\\\\\__\/\\\\\\\\\\\\\/__     </span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">    _\//\\\______/\\\__\/\\\//////\\\____\/\\\/////////\\\_\/\\\/////////____    </span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">     __\///\\\\/\\\\/___\/\\\____\//\\\___\/\\\_______\/\\\_\/\\\_____________   </span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">      ____\////\\\//_____\/\\\_____\//\\\__\/\\\_______\/\\\_\/\\\_____________  </span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">       _______\///\\\\\\__\/\\\______\//\\\_\/\\\\\\\\\\\\\/__\/\\\_____________ </span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">        _________\//////___\///________\///__\/////////////____\///______________</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#ifndef QRBP_HPP_</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#define QRBP_HPP_</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &lt;Eigen/Dense&gt;</span>             <span class="comment">// Include the Eigen library</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="helper__functions_8hpp.html">helper_functions.hpp</a>&quot;</span>  <span class="comment">// Include the helper functions for using the rotation matrices</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace__qrbp__.html">_qrbp_</a>{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// Constants</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a5f7c243b0bb59c6889db2c66268d853d">   70</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a5f7c243b0bb59c6889db2c66268d853d">G</a> = 9.81;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a2f90fcde755bd3384e29669e3b7feb65">   71</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a2f90fcde755bd3384e29669e3b7feb65">RHO_HAT</a> = 1.225;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ad1c9916882f4ff164e65de5034c3ce0a">   72</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#ad1c9916882f4ff164e65de5034c3ce0a">PI</a> = 3.1415;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ad01ba6618f08d2e501fcbbe595c6eaba">   73</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#ad01ba6618f08d2e501fcbbe595c6eaba">PIHALF</a> = (<a class="code" href="namespace__qrbp__.html#ad1c9916882f4ff164e65de5034c3ce0a">PI</a>/2);</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a0e2c16559d45c17bb872a649e39996c7">   74</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a0e2c16559d45c17bb872a649e39996c7">DEG2RAD</a> = (<a class="code" href="namespace__qrbp__.html#ad1c9916882f4ff164e65de5034c3ce0a">PI</a>/180);</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#aa86e03282fb199d95f9cc8391a8bcaf1">   75</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#aa86e03282fb199d95f9cc8391a8bcaf1">RAD2DEG</a> = (180/<a class="code" href="namespace__qrbp__.html#ad1c9916882f4ff164e65de5034c3ce0a">PI</a>);</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a4f92c6517a0583a360887945dd885c4c">   76</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a4f92c6517a0583a360887945dd885c4c">SQRT2_OVER_2</a> = 0.7071067;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// Vehicle and Environment Defines</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a5f587d392cc2d9e31cd82e13558b5f09">   79</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a5f587d392cc2d9e31cd82e13558b5f09">MASS</a> = 2.04192755;                                    <span class="comment">// mass of vehicle                [Kg]                                      </span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a14a65c809ae65853db30236672cdeb69">   80</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a14a65c809ae65853db30236672cdeb69">LX</a> = 0.097509;                                        <span class="comment">// dist to motor along x^J         [m]</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a8fdaaf41a9523665cee3cdc96ccd5dc9">   81</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a8fdaaf41a9523665cee3cdc96ccd5dc9">LY</a> = 0.110688;                                        <span class="comment">// dist to motor along y^J         [m]</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a315aff83c02622065bf0475fd8d63a95">   82</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a315aff83c02622065bf0475fd8d63a95">LZ_S</a> = 0.038779;                                      <span class="comment">// dist to aero center of stabs    [m]</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a8b76f83abd70b8e0bbaa5c86aa127657">   83</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a8b76f83abd70b8e0bbaa5c86aa127657">SPAN_W</a> = 0.50;                                        <span class="comment">// span of wings                   [m]</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#aeba510252724b0168a4fccdda154f537">   84</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#aeba510252724b0168a4fccdda154f537">CHORD_W</a> = 0.12;                                       <span class="comment">// chord of wings                  [m]</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a2a70d9b932f1d54d18351ce839dbc66c">   85</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a2a70d9b932f1d54d18351ce839dbc66c">SPAN_S</a> = 0.175;                                       <span class="comment">// span of stabs                   [m]</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a39047d7544cf31527dcb6a659b6625a3">   86</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a39047d7544cf31527dcb6a659b6625a3">CHORD_S</a> = 0.02;                                       <span class="comment">// chord of stabs                  [m]</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a3735101a9afb01baff19d399ba786ccb">   87</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a3735101a9afb01baff19d399ba786ccb">PLANFORM_AREA_W</a> = (2.0 * <a class="code" href="namespace__qrbp__.html#a8b76f83abd70b8e0bbaa5c86aa127657">SPAN_W</a> * <a class="code" href="namespace__qrbp__.html#a39047d7544cf31527dcb6a659b6625a3">CHORD_S</a>);           <span class="comment">// planform area of wings        [m^2]</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a03a7f930931d27a2301ad7f33fb1cd9b">   88</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a03a7f930931d27a2301ad7f33fb1cd9b">PLANFORM_AREA_S</a> = (2.0 * <a class="code" href="namespace__qrbp__.html#a2a70d9b932f1d54d18351ce839dbc66c">SPAN_S</a> * <a class="code" href="namespace__qrbp__.html#a39047d7544cf31527dcb6a659b6625a3">CHORD_S</a>);           <span class="comment">// planform area of stabs        [m^2]</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// Aerodynamic Dynamic Coefficient Defines</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a3a80c85644b880f110435dc327db3da4">   91</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a3a80c85644b880f110435dc327db3da4">DYN_PRESS_COEFF_W</a> = (0.5 * <a class="code" href="namespace__qrbp__.html#a2f90fcde755bd3384e29669e3b7feb65">RHO_HAT</a> * <a class="code" href="namespace__qrbp__.html#a3735101a9afb01baff19d399ba786ccb">PLANFORM_AREA_W</a>);     </div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ad388843399be6584cf48cb897aa18612">   92</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#ad388843399be6584cf48cb897aa18612">DYN_PRESS_COEFF_S</a> = (0.5 * <a class="code" href="namespace__qrbp__.html#a2f90fcde755bd3384e29669e3b7feb65">RHO_HAT</a> * <a class="code" href="namespace__qrbp__.html#a03a7f930931d27a2301ad7f33fb1cd9b">PLANFORM_AREA_S</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// Switch over angle of QRBP</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#af509029e976bd7aee173e9e97fcf5752">   95</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#af509029e976bd7aee173e9e97fcf5752">AoS</a> = 70*<a class="code" href="namespace__qrbp__.html#a0e2c16559d45c17bb872a649e39996c7">DEG2RAD</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// vairbales for switching mechanism</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a5dd4ffe99189f5f603de6b0925bc8097">   98</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespace__qrbp__.html#a5dd4ffe99189f5f603de6b0925bc8097">is_biplane</a>;        <span class="comment">// Boolean to tell the controller if it is in biplane mode</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#adf04463b176adb01aa1ed97dd5c6a234">   99</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespace__qrbp__.html#adf04463b176adb01aa1ed97dd5c6a234">momentary_button</a>;  <span class="comment">// Boolean to tell the controller to reset conditions</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Thrust Normalizeing polynomials are hardcoded!</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// Take care coding this from matlab. check the documentation for the polyval function.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// The polynomails are reversed!.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a2c90677d0b37596256b17b23c52c1808">  104</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a2c90677d0b37596256b17b23c52c1808">CT_MOTOR</a> =  0.1017;                                   <span class="comment">// motor torque coeff              [-]</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a16128c118202e0054e8da9c53add9431">  105</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a16128c118202e0054e8da9c53add9431">MAX_THRUST</a> = 18;                                      <span class="comment">// max allowed thrust per motor    [N]</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a35d6199337b785517716f79083bc6f14">  106</a></span>&#160;    <span class="keyword">inline</span> constexpr <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a35d6199337b785517716f79083bc6f14">MIN_THRUST</a> = 0.3;                                     <span class="comment">// min allowed thrust per motor    [N]</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// Roll Rate Filter ------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// A matrix of the roll_ref filter</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a89bb354328277a75778810b684dac189">  111</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix2d <a class="code" href="namespace__qrbp__.html#a89bb354328277a75778810b684dac189">A_filter_roll_ref</a> = (Eigen::Matrix2d() &lt;&lt; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                                    -72.0, -1600.0, </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                                      1.0,    0.0 </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                ).finished(); </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// B matrix of the roll_ref filter</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a1be205350995c0243c2a2653f5a9966f">  117</a></span>&#160;    <span class="keyword">const</span> Eigen::Vector2d <a class="code" href="namespace__qrbp__.html#a1be205350995c0243c2a2653f5a9966f">B_filter_roll_ref</a> = Eigen::Vector2d(1.0, 0); </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// C matrix of the roll_ref filter</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a20eac4ebd127b9deb6e144467c7f88e8">  120</a></span>&#160;    <span class="keyword">const</span> Eigen::RowVector2d <a class="code" href="namespace__qrbp__.html#a20eac4ebd127b9deb6e144467c7f88e8">C_filter_roll_ref</a> = Eigen::RowVector2d(1600.0, 0); </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// D matrix of the roll_ref filter</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ad590826aa5ebaa1d0b8f3164f01aed94">  123</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#ad590826aa5ebaa1d0b8f3164f01aed94">D_filter_roll_ref</a> = 0.0; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// Pitch Rate Filter -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// A matrix of the pitch_ref filter</span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ac0e715682ae309aae325a75b24ba13f3">  127</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix2d <a class="code" href="namespace__qrbp__.html#ac0e715682ae309aae325a75b24ba13f3">A_filter_pitch_ref</a> = (Eigen::Matrix2d() &lt;&lt; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                                    -72.0, -1600.0, </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                                      1.0,    0.0</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                ).finished(); </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// B matrix of the pitch_ref filter</span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a814b12b3e16fadcba1dd779db1e3fb30">  133</a></span>&#160;    <span class="keyword">const</span> Eigen::Vector2d <a class="code" href="namespace__qrbp__.html#a814b12b3e16fadcba1dd779db1e3fb30">B_filter_pitch_ref</a> = Eigen::Vector2d(1.0, 0); </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// C matrix of the pitch_ref filter</span></div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ac02b3e0d88a023a9bca113bb0cb49251">  136</a></span>&#160;    <span class="keyword">const</span> Eigen::RowVector2d <a class="code" href="namespace__qrbp__.html#ac02b3e0d88a023a9bca113bb0cb49251">C_filter_pitch_ref</a> = Eigen::RowVector2d(1600.0, 0); </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// D matrix of the pitch_ref filter</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a301c47e4a5be858762dc907646e7c130">  139</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a301c47e4a5be858762dc907646e7c130">D_filter_pitch_ref</a> = 0.0; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// Yaw Rate Filter -------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// A matrix of the yaw_ref filter</span></div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a32ddaef38e7f03bf4e1153045e9f600d">  143</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix2d <a class="code" href="namespace__qrbp__.html#a32ddaef38e7f03bf4e1153045e9f600d">A_filter_yaw_ref</a> = (Eigen::Matrix2d() &lt;&lt; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                    -72.0, -1600.0, </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                                      1.0,    0.0</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                                ).finished(); </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// B matrix of the yaw_ref filter</span></div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a74b34d611525bc7af8c4cb193f0fb777">  149</a></span>&#160;    <span class="keyword">const</span> Eigen::Vector2d <a class="code" href="namespace__qrbp__.html#a74b34d611525bc7af8c4cb193f0fb777">B_filter_yaw_ref</a> = Eigen::Vector2d(1.0, 0); </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// C matrix of the yaw_ref filter</span></div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#abd629164f9bea744e1b4f9d58453b8f8">  152</a></span>&#160;    <span class="keyword">const</span> Eigen::RowVector2d <a class="code" href="namespace__qrbp__.html#abd629164f9bea744e1b4f9d58453b8f8">C_filter_yaw_ref</a> = Eigen::RowVector2d(1600.0, 0); </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// D matrix of the yaw_ref filter</span></div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#aae88f603e9dc67167056860c535be199">  155</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#aae88f603e9dc67167056860c535be199">D_filter_yaw_ref</a> = 0.0; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// Roll Acceleration Filter ----------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// A matrix of the roll_dot_ref filter</span></div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ab5363150d86811a10f7f464b4746586e">  159</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix2d <a class="code" href="namespace__qrbp__.html#ab5363150d86811a10f7f464b4746586e">A_filter_roll_dot_ref</a> = (Eigen::Matrix2d() &lt;&lt; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                                    -50.0, -2500.0, </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                                      1.0,    0.0 </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                                ).finished(); </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// B matrix of the roll_dot_ref filter</span></div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a553d7983576b516e388a99ea41277726">  165</a></span>&#160;    <span class="keyword">const</span> Eigen::Vector2d <a class="code" href="namespace__qrbp__.html#a553d7983576b516e388a99ea41277726">B_filter_roll_dot_ref</a> = Eigen::Vector2d(1.0, 0); </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// C matrix of the roll_dot_ref filter</span></div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#abaa1664101f50e96cc2a7ec4cbb273dc">  168</a></span>&#160;    <span class="keyword">const</span> Eigen::RowVector2d <a class="code" href="namespace__qrbp__.html#abaa1664101f50e96cc2a7ec4cbb273dc">C_filter_roll_dot_ref</a> = Eigen::RowVector2d(0.15*2500.0, 0); </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// D matrix of the roll_dot_ref filter</span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#aba0dca121a4bbee590e274e4ee57b7a5">  171</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#aba0dca121a4bbee590e274e4ee57b7a5">D_filter_roll_dot_ref</a> = 0.0; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// Pitch Acceleration Filter ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// A matrix of the pitch_ref filter</span></div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#abea3f384cca1192a7f2406d6f520cf2f">  175</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix2d <a class="code" href="namespace__qrbp__.html#abea3f384cca1192a7f2406d6f520cf2f">A_filter_pitch_dot_ref</a> = (Eigen::Matrix2d() &lt;&lt; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                                    -50.0, -2500.0, </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                                      1.0,    0.0</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                ).finished(); </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// B matrix of the pitch_ref filter</span></div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#aaf33c55a6b6c786ccff929242a043ba3">  181</a></span>&#160;    <span class="keyword">const</span> Eigen::Vector2d <a class="code" href="namespace__qrbp__.html#aaf33c55a6b6c786ccff929242a043ba3">B_filter_pitch_dot_ref</a> = Eigen::Vector2d(1.0, 0); </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// C matrix of the pitch_ref filter</span></div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ae6d362a87b0aecfdfd1904844368650b">  184</a></span>&#160;    <span class="keyword">const</span> Eigen::RowVector2d <a class="code" href="namespace__qrbp__.html#ae6d362a87b0aecfdfd1904844368650b">C_filter_pitch_dot_ref</a> = Eigen::RowVector2d(0.15*2500.0, 0); </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// D matrix of the pitch_ref filter</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a0359466cb9bea594e2a2f0c1024821c3">  187</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a0359466cb9bea594e2a2f0c1024821c3">D_filter_pitch_dot_ref</a> = 0.0; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// Yaw Acceleration Filter -----------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// A matrix of the yaw_ref filter</span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a68c98faee9040aad0afefac8a3fd5e4b">  191</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix2d <a class="code" href="namespace__qrbp__.html#a68c98faee9040aad0afefac8a3fd5e4b">A_filter_yaw_dot_ref</a> = (Eigen::Matrix2d() &lt;&lt; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                                    -50.0, -2500.0, </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                                      1.0,    0.0</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                                ).finished(); </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// B matrix of the yaw_ref filter</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a293c931417a6190d4ce511cc52e92a29">  197</a></span>&#160;    <span class="keyword">const</span> Eigen::Vector2d <a class="code" href="namespace__qrbp__.html#a293c931417a6190d4ce511cc52e92a29">B_filter_yaw_dot_ref</a> = Eigen::Vector2d(1.0, 0); </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// C matrix of the yaw_ref filter</span></div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ab8fcdc02cf2bd196529e2d25eb86c60c">  200</a></span>&#160;    <span class="keyword">const</span> Eigen::RowVector2d <a class="code" href="namespace__qrbp__.html#ab8fcdc02cf2bd196529e2d25eb86c60c">C_filter_yaw_dot_ref</a> = Eigen::RowVector2d(0.15*2500.0, 0); </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// D matrix of the yaw_ref filter</span></div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a1bc43e03a3a0481dc8671bc46f22ffc3">  203</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="namespace__qrbp__.html#a1bc43e03a3a0481dc8671bc46f22ffc3">D_filter_yaw_dot_ref</a> = 0.0; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// Thrust Polynomial -----------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// Polynomial coefficients vector to evaluate the Commanded Thrust [-] based on the Thrust in Newton</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// TMotor F35A - Velox V2808 Kv1300</span></div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a89bd0ca7f8b93ef0594a83ba75da00db">  208</a></span>&#160;    <span class="keyword">const</span> Eigen::VectorXd <a class="code" href="namespace__qrbp__.html#a89bd0ca7f8b93ef0594a83ba75da00db">thrust_polynomial_coeff_qrbp</a> = (Eigen::VectorXd(8) &lt;&lt; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                                            0.000000030316084940690649384320061064321,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                                           -0.000001814468657920738862350290739045,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                                            0.000042434512948142268497307011410058,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                                           -0.00050487431926448940282259325584846,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                            0.0035249290604740459061094970394379,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                                           -0.017552333963129614080589391278409,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                                            0.1149654034760465154407782506496,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                                            0.011001286689392602777259888569006</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                                                        ).finished();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// Weight vector of the qrbp</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a750efc0a0bf005066afc18dc5aab039b">  220</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">const</span> Eigen::Vector3d <a class="code" href="namespace__qrbp__.html#a750efc0a0bf005066afc18dc5aab039b">e3_basis</a> = Eigen::Vector3d(0.0, 0.0, 1.0);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// Mixer Matrix - This captures the necessary constants within the lambda function and initializes the</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// mixer_matrix_quadcopter with the resulting matrix.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// [1/4, -1/(4*l_y),  1/(4*l_x),  1/(4*c_t)]</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// [1/4,  1/(4*l_y), -1/(4*l_x),  1/(4*c_t)]</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// [1/4,  1/(4*l_y),  1/(4*l_x), -1/(4*c_t)]</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// [1/4, -1/(4*l_y), -1/(4*l_x), -1/(4*c_t)]</span></div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a8d7d01f6faf55a0e2cc1d5a824c6f5d3">  229</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix4d <a class="code" href="namespace__qrbp__.html#a8d7d01f6faf55a0e2cc1d5a824c6f5d3">mixer_matrix_qrbp</a> = []() {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        Eigen::Matrix4d mat; <span class="comment">// 4 rows, 4 columns</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment">// Assign values element-by-element</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        mat(0, 0) =  1.0 / 4.0;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        mat(0, 1) = -1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a8fdaaf41a9523665cee3cdc96ccd5dc9">LY</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        mat(0, 2) =  1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a14a65c809ae65853db30236672cdeb69">LX</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        mat(0, 3) =  1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a2c90677d0b37596256b17b23c52c1808">CT_MOTOR</a>); </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        mat(1, 0) =  1.0 / 4.0;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        mat(1, 1) =  1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a8fdaaf41a9523665cee3cdc96ccd5dc9">LY</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        mat(1, 2) = -1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a14a65c809ae65853db30236672cdeb69">LX</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        mat(1, 3) =  1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a2c90677d0b37596256b17b23c52c1808">CT_MOTOR</a>); </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        mat(2, 0) =  1.0 / 4.0;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        mat(2, 1) =  1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a8fdaaf41a9523665cee3cdc96ccd5dc9">LY</a>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        mat(2, 2) =  1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a14a65c809ae65853db30236672cdeb69">LX</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        mat(2, 3) = -1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a2c90677d0b37596256b17b23c52c1808">CT_MOTOR</a>); </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        mat(3, 0) =  1.0 / 4.0;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        mat(3, 1) = -1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a8fdaaf41a9523665cee3cdc96ccd5dc9">LY</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        mat(3, 2) = -1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a14a65c809ae65853db30236672cdeb69">LX</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        mat(3, 3) = -1.0 / (4.0 * <a class="code" href="namespace__qrbp__.html#a2c90677d0b37596256b17b23c52c1808">CT_MOTOR</a>); </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">return</span> mat; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// Matrix of inertia of the quadcopter frame</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// [kg*m^2] inertia matrix of the vehicle system (drone frame + box + propellers) expressed in</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// Pixhawk coordinate system (FRD - x-Front, y-Right, z-Down), computed at the vehicle center of mass</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#afe1a3b1845ca273039fd22e8d695faea">  261</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix3d <a class="code" href="namespace__qrbp__.html#afe1a3b1845ca273039fd22e8d695faea">inertia_matrix_q</a> = (Eigen::Matrix3d() &lt;&lt; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                                 0.03170556, -0.00000810, 0.00102548,</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                                -0.00000810,  0.02125186,-0.00000107,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                                 0.00102548, -0.00000107, 0.03765785</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                             ).finished(); </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// Matrix of inertia of the biplane frame</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// [kg*m^2] inertia matrix of the vehicle system (drone frame + box + propellers) expressed in</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// Pixhawk coordinate system (FRD - x-Front, y-Right, z-Down), computed at the vehicle center of mass</span></div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a8fce535ee56720166df0f16eeb940141">  270</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix3d <a class="code" href="namespace__qrbp__.html#a8fce535ee56720166df0f16eeb940141">inertia_matrix_b</a> = (Eigen::Matrix3d() &lt;&lt; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                                 0.03676930,  0.00000339, -0.00005560,</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                                 0.00000339,  0.01964797, -0.00000662,</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                                -0.00005560, -0.00000662,  0.03093953</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                             ).finished();      </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// Matrix that rotates from quadcopter to biplane mode</span></div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#aa409fec80992204c03412d6b864353ad">  277</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix3d <a class="code" href="namespace__qrbp__.html#aa409fec80992204c03412d6b864353ad">R_Jq_Jb</a> = (Eigen::Matrix3d() &lt;&lt; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                        0.0, 0.0, 1.0,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                        0.0, 1.0, 0.0,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                       -1.0, 0.0, 0.0).finished();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// Matrix that rotates from biplane to quadcopter mode</span></div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#ae2a7f33803f7745860e2fd359ee24fce">  283</a></span>&#160;    <span class="keyword">const</span> Eigen::Matrix3d <a class="code" href="namespace__qrbp__.html#ae2a7f33803f7745860e2fd359ee24fce">R_Jb_Jq</a> = (Eigen::Matrix3d() &lt;&lt;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                        0.0, 0.0, -1.0,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                        0.0, 1.0,  0.0,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                        1.0, 0.0,  0.0).finished();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// Quaternion that denotes a pitch of 90 degress about an axis and it&#39;s inverse</span></div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a115c08f79c3b00a7fafd96b25a2a03d5">  289</a></span>&#160;    <span class="keyword">const</span> Eigen::Quaterniond <a class="code" href="namespace__qrbp__.html#a115c08f79c3b00a7fafd96b25a2a03d5">PITCH_90</a> = Eigen::Quaterniond(cos(90*<a class="code" href="namespace__qrbp__.html#a0e2c16559d45c17bb872a649e39996c7">DEG2RAD</a>/2.0), 0.0, sin(90*<a class="code" href="namespace__qrbp__.html#a0e2c16559d45c17bb872a649e39996c7">DEG2RAD</a>/2.0), 0.0);</div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a927eebbfaa28b1ccd4635146702eb327">  290</a></span>&#160;    <span class="keyword">const</span> Eigen::Quaterniond <a class="code" href="namespace__qrbp__.html#a927eebbfaa28b1ccd4635146702eb327">PITCH_90_INV</a> = <a class="code" href="namespace__qrbp__.html#a115c08f79c3b00a7fafd96b25a2a03d5">PITCH_90</a>.inverse();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// Inline function to compute the switch from Quadcopter mode to Biplane Mode and vice versa</span></div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a013e27b49e17442a9f78e38dfe445d26">  300</a></span>&#160;<span class="comment"></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespace__qrbp__.html#a013e27b49e17442a9f78e38dfe445d26">QRBPswitchFun</a>(<span class="keywordtype">double</span> pitch, <span class="keywordtype">bool</span>&amp; <a class="code" href="namespace__qrbp__.html#a5dd4ffe99189f5f603de6b0925bc8097">is_biplane</a>, <span class="keywordtype">bool</span>&amp; mnt_btn)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="comment">// Uncomment based on your requirement</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="comment">// Code to switch in both directions of flight.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="comment">// double abs_pitch = abs(pitch);</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">// if (abs_pitch &gt;= AoS &amp;&amp; !is_biplane)</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">// {</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">//     is_biplane = true;</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="comment">//     mnt_btn = true;</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="comment">// }</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">// else if (abs_pitch &lt; AoS &amp;&amp; is_biplane)</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// {</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">//     is_biplane = false;</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="comment">//     mnt_btn = true;</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">// }</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="comment">// else</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">// {</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="comment">//     mnt_btn = false;</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="comment">// }</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// Code to switch in forward direction of flight.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> (pitch &lt;= -<a class="code" href="namespace__qrbp__.html#af509029e976bd7aee173e9e97fcf5752">AoS</a> &amp;&amp; !<a class="code" href="namespace__qrbp__.html#a5dd4ffe99189f5f603de6b0925bc8097">is_biplane</a>)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="namespace__qrbp__.html#a5dd4ffe99189f5f603de6b0925bc8097">is_biplane</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            mnt_btn = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pitch &gt; -<a class="code" href="namespace__qrbp__.html#af509029e976bd7aee173e9e97fcf5752">AoS</a> &amp;&amp; <a class="code" href="namespace__qrbp__.html#a5dd4ffe99189f5f603de6b0925bc8097">is_biplane</a>)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <a class="code" href="namespace__qrbp__.html#a5dd4ffe99189f5f603de6b0925bc8097">is_biplane</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            mnt_btn = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            mnt_btn = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// Inline Function to update the biplane mode states - Goes in the inner loop bridge.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// Need to modify. This function is written assuming that we are only going in forward flight in a straight line!!!</span></div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a17285ac2aa833a31855a2948e28b695e">  351</a></span>&#160;<span class="comment"></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespace__qrbp__.html#a17285ac2aa833a31855a2948e28b695e">update_states_to_biplane_mode</a>(<span class="keyword">const</span> Vector3d eta,<span class="keyword">const</span> Vector3d omega, </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                              Vector3d&amp; eta_b, Vector3d&amp; omega_b) </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="comment">// Compute the right hand side of the equation</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        Eigen::Matrix&lt;double, 3, 3&gt;  RHS = <a class="code" href="namespace__utilities__.html#a4402ee1782f355ab0bda47407d327974">_utilities_::rotationMatrix321LocalToGlobal</a>(eta(0), eta(1), eta(2))*<a class="code" href="namespace__qrbp__.html#aa409fec80992204c03412d6b864353ad">R_Jq_Jb</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="comment">// Matlab code to follow</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">// if RHS(3,1) == 1</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="comment">//     theta_B = -pi/2;</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">//     psi_B = atan2(-RHS(2,3),-RHS(1,3));</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="comment">//     phi_B = 0;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="comment">// elseif RHS(3,1) == -1</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="comment">//     theta_B = pi/2;</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="comment">//     psi_B = atan2(RHS(1,2),RHS(2,2));</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="comment">//     phi_B = 0;</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="comment">// else</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">//     theta_B(2,1) = atan2(-RHS(3,1),sqrt(1-RHS(3,1)^2));</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">//     theta_B(1,1) = atan2(-RHS(3,1),-sqrt(1-RHS(3,1)^2));</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="comment">//     phi_B(2,1) = atan2(RHS(3,2),RHS(3,3));</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="comment">//     phi_B(1,1) = atan2(-RHS(3,2),-RHS(3,3));</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="comment">//     psi_B(2,1) = atan2(RHS(2,1),RHS(1,1));</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="comment">//     psi_B(1,1) = atan2(-RHS(2,1),-RHS(1,1));</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="comment">// end</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">// Some vectors and temprory variables</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        Vector2d phi_b, theta_b, psi_b;             <span class="comment">// Resultant angle pair for biplane</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordtype">double</span> abs0, abs1;                          <span class="comment">// Temp variables for caluclating the smallest rotation</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordtype">double</span> rhs20 = RHS(2, 0);                   <span class="comment">// caching variable</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordtype">double</span> rhs20_sqrt = sqrt(1 - rhs20*rhs20);  <span class="comment">// caching variable</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordtype">double</span> rhs21 = RHS(2,1);                    <span class="comment">// caching variable</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordtype">double</span> rhs22 = RHS(2,2);                    <span class="comment">// caching variable</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordtype">double</span> rhs10 = RHS(1,0);                    <span class="comment">// caching variable</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordtype">double</span> rhs00 = RHS(0,0);                    <span class="comment">// caching variable</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span> (abs(rhs20) != 1)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="comment">// Find the pitch for biplane</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            theta_b(0)  = atan2( -rhs20,  rhs20_sqrt );</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            theta_b(1)  = atan2( -rhs20, -rhs20_sqrt );</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            abs0 = std::fabs(theta_b(0));</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            abs1 = std::fabs(theta_b(1));</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            eta_b(1) = (abs0 &lt; abs1) ? theta_b(0) : theta_b(1);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="comment">// Find the roll for biplane</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            phi_b(0) = atan2(  rhs21,  rhs22 );</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            phi_b(1) = atan2( -rhs21, -rhs22 );</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            abs0 = std::fabs(phi_b(0));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            abs1 = std::fabs(phi_b(1));</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            eta_b(0) = (abs0 &lt; abs1) ? phi_b(0) : phi_b(1);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="comment">// Find the yaw for biplane</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            psi_b(0) = atan2(  rhs10,  rhs00 );</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            psi_b(1) = atan2( -rhs10, -rhs00 );</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            abs0 = std::fabs(psi_b(0));</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            abs1 = std::fabs(psi_b(1));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            eta_b(2) = (abs0 &lt; abs1) ? psi_b(0) : psi_b(1);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="comment">// Conditions for if we are hovering and if we are pointing the propeller&#39;s axis to the ground. </span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="comment">// This is not going to happen and therfore the if statements are put under another if statement </span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="comment">// To save compute</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            eta_b(1) = (rhs20 == 1) ? -<a class="code" href="namespace__qrbp__.html#ad01ba6618f08d2e501fcbbe595c6eaba">PIHALF</a> : <a class="code" href="namespace__qrbp__.html#ad01ba6618f08d2e501fcbbe595c6eaba">PIHALF</a>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            eta_b(2) = (rhs20 == 1) ? atan2(-RHS(1,2), -RHS(0,2)) : atan2(RHS(0,1), RHS(1,1));</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            eta_b(0) = 0.0;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="comment">// Compute the angular velocities in the biplane frame</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        omega_b = <a class="code" href="namespace__qrbp__.html#aa409fec80992204c03412d6b864353ad">R_Jq_Jb</a> * omega;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// Code written by Giri Mugundan Kumar to switch states - yet to be debugged</span></div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a027dddf1d3cd51fc6ac58652d0350e2c">  438</a></span>&#160;<span class="comment"></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespace__qrbp__.html#a027dddf1d3cd51fc6ac58652d0350e2c">update_states_to_biplane_quaternion_gmk</a>(<span class="keyword">const</span> Eigen::Quaterniond q_q, <span class="keyword">const</span> Vector3d omega,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                                        Vector3d&amp; eta_b, Vector3d&amp; omega_b)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="comment">// Pitch 90 degrees about the y axis to get the new quaternion in biplane frame</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        Eigen::Quaterniond q_b = q_q*<a class="code" href="namespace__qrbp__.html#a927eebbfaa28b1ccd4635146702eb327">PITCH_90_INV</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">// Compute elements of Direction Cosine Matrix (DCM) from quaternion</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordtype">double</span> a = q_b.w();</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordtype">double</span> b = q_b.x();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordtype">double</span> c = q_b.y();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordtype">double</span> d = q_b.z();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordtype">double</span> aa = a * a;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordtype">double</span> ab = a * b;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordtype">double</span> ac = a * c;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordtype">double</span> ad = a * d;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordtype">double</span> bb = b * b;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordtype">double</span> bc = b * c;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordtype">double</span> bd = b * d;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordtype">double</span> cc = c * c;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordtype">double</span> cd = c * d;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordtype">double</span> dd = d * d;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">// Compute DCM elements</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordtype">double</span> dcm00 = aa + bb - cc - dd;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="comment">// double dcm01 = 2 * (bc - ad); // not needed by the algorithm</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordtype">double</span> dcm02 = 2 * (ac + bd);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordtype">double</span> dcm10 = 2 * (bc + ad);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment">// double dcm11 = aa - bb + cc - dd; // not needed by the algorithm</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordtype">double</span> dcm12 = 2 * (cd - ab);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordtype">double</span> dcm20 = 2 * (bd - ac);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordtype">double</span> dcm21 = 2 * (ab + cd);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordtype">double</span> dcm22 = aa - bb - cc + dd;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="comment">// Clamp the value of dcm20 to the range [-1, 1] to avoid domain errors with asinf</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span> (dcm20 &lt; -1.0) dcm20 = -1.0;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (dcm20 &gt; 1.0) dcm20 = 1.0;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="comment">// Compute the Euler angles from DCM</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        eta_b(1) = asin(-dcm20); <span class="comment">// Pitch</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// Handle gimbal lock cases</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">if</span> (fabs(eta_b(1) - M_PI / 2) &lt; 1.0e-3) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            eta_b(0) = 0.0; <span class="comment">// Roll</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            eta_b(2) = atan2(dcm12, dcm02); <span class="comment">// Yaw</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fabs(eta_b(1) + M_PI / 2) &lt; 1.0e-3) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            eta_b(0) = 0.0; <span class="comment">// Roll</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            eta_b(2) = atan2(-dcm12, -dcm02); <span class="comment">// Yaw</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            eta_b(0) = atan2(dcm21, dcm22); <span class="comment">// Roll</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            eta_b(2) = atan2(dcm10, dcm00); <span class="comment">// Yaw</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="comment">// Compute the angular velocities in the biplane frame</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        omega_b = <a class="code" href="namespace__qrbp__.html#aa409fec80992204c03412d6b864353ad">R_Jq_Jb</a> * omega;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// Code from the PX4 Repository to switch states - might need debugging</span></div>
<div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="namespace__qrbp__.html#a4f413e588094233ae2130575272e7e4f">  504</a></span>&#160;<span class="comment"></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespace__qrbp__.html#a4f413e588094233ae2130575272e7e4f">update_states_to_biplane_quaternions</a>(<span class="keyword">const</span> Eigen::Quaterniond q_q, <span class="keyword">const</span> Vector3d omega, </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                                     Vector3d&amp; eta_b, Vector3d&amp; omega_b)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="comment">// Modified from pixhawk code that constructs a dcm matrix from quaternion     </span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> a = q_q.w();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> b = q_q.x();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> c = q_q.y();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> d = q_q.z();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> aa = a * a;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> ab = a * b;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> ac = a * c;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> ad = a * d;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> bb = b * b;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> bc = b * c;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> bd = b * d;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> cc = c * c;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> cd = c * d;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> dd = d * d;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="comment">// Construct the dcm rotation matrix according to the pixhawk code.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        Eigen::Matrix&lt;double, 3, 3&gt; dcm;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        dcm(0, 0) = aa + bb - cc - dd;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        dcm(0, 1) = 2 * (bc - ad);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        dcm(0, 2) = 2 * (ac + bd);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        dcm(1, 0) = 2 * (bc + ad);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        dcm(1, 1) = aa - bb + cc - dd;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        dcm(1, 2) = 2 * (cd - ab);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        dcm(2, 0) = 2 * (bd - ac);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        dcm(2, 1) = 2 * (ab + cd);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        dcm(2, 2) = aa - bb - cc + dd;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">// Vehicle is a tailsitter, we need to modify the estimated attitude for fw mode</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="comment">// Since the VTOL airframe is initialized as a multicopter we need to modify the </span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="comment">// estimated attitude fro the fixed wing operation. Since the neutral position of</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="comment">// the vehicle in fixed wing mode is -90 degrees rotated around the pitch axis </span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="comment">// compared to the neutral position of the vecicle in multicopter mode we need to </span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="comment">// swap the roll and the yaw axis (1st and 3rd column) in the rotation matrix.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="comment">// Additionally, in order to get the correct sign of the pitch, we need to multiply</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="comment">// the new x axis of the rotation matrix with -1. </span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">        * original:         modified:</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">        *</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">        * Rxx  Ryx  Rzx     -Rzx  Ryx  Rxx</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">        * Rxy  Ryy  Rzy     -Rzy  Ryy  Rxy</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">        * Rxz  Ryz  Rzz     -Rzz  Ryz  Rxz</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">        * */</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        Eigen::Matrix&lt;double, 3,3&gt; dcm_adapted = dcm;        <span class="comment">// modified rotation matrix</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">/* move z to x */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        dcm_adapted(0, 0) = dcm(0, 2);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        dcm_adapted(1, 0) = dcm(1, 2);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        dcm_adapted(2, 0) = dcm(2, 2);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="comment">/* move x to z */</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        dcm_adapted(0, 2) = dcm(0, 0);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        dcm_adapted(1, 2) = dcm(1, 0);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        dcm_adapted(2, 2) = dcm(2, 0);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment">/* change direction of pitch (convert to right handed system) */</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        dcm_adapted(0, 0) = -dcm_adapted(0, 0);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        dcm_adapted(1, 0) = -dcm_adapted(1, 0);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        dcm_adapted(2, 0) = -dcm_adapted(2, 0);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="comment">// Now reconstruct the euler angles from the dcm_adapted matrix.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="comment">// Theta</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordtype">double</span> theta = std::asin(-dcm_adapted(2,0));</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordtype">double</span> roll;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordtype">double</span> yaw;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">if</span> ((std::fabs(theta - M_PI_2)) &lt; 1.0e-3)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            roll = 0.0;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            yaw = std::atan2(dcm_adapted(1,2), dcm_adapted(0,2));</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((std::fabs(theta + M_PI_2)) &lt; 1.0e-3)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            roll = 0.0;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            yaw = std::atan2(-dcm_adapted(1,2), -dcm_adapted(0,2));</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        } </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            roll = std::atan2(dcm_adapted(2,1), dcm_adapted(2,2));</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            yaw = std::atan2(dcm_adapted(1,0), dcm_adapted(0,0));</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">// Assign pitch</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        eta_b(1) = theta;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="comment">// Assign roll</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">if</span> (roll &gt; M_PI_2) { eta_b(0) = roll - M_PI; }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (roll &lt; -M_PI_2) { eta_b(0) = roll + M_PI; }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">else</span> { eta_b(0) = roll; }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">// Assign yaw</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span> (yaw &gt; M_PI_2) { eta_b(2) = yaw - M_PI; }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yaw &lt; -M_PI_2) { eta_b(2) = yaw + M_PI; }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">else</span> { eta_b(2) = yaw; }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="comment">// Compute the angular velocities in the biplane frame</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        omega_b = <a class="code" href="namespace__qrbp__.html#aa409fec80992204c03412d6b864353ad">R_Jq_Jb</a> * omega;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }                                                     </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;} <span class="comment">// namespace _qrbp_</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="preprocessor">#endif  </span><span class="comment">// QRBP_HPP_</span></div>
<div class="ttc" id="ahelper__functions_8hpp_html"><div class="ttname"><a href="helper__functions_8hpp.html">helper_functions.hpp</a></div><div class="ttdoc">Definitions of some standard templates used in all controllers.</div></div>
<div class="ttc" id="anamespace__qrbp___html"><div class="ttname"><a href="namespace__qrbp__.html">_qrbp_</a></div><div class="ttdef"><b>Definition:</b> <a href="aero__qrbp_8hpp_source.html#l00060">aero_qrbp.hpp:60</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a013e27b49e17442a9f78e38dfe445d26"><div class="ttname"><a href="namespace__qrbp__.html#a013e27b49e17442a9f78e38dfe445d26">_qrbp_::QRBPswitchFun</a></div><div class="ttdeci">void QRBPswitchFun(double pitch, bool &amp;is_biplane, bool &amp;mnt_btn)</div><div class="ttdoc">Inline function to compute the switch from Quadcopter mode to Biplane Mode and vice versa.</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00300">qrbp.hpp:300</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a027dddf1d3cd51fc6ac58652d0350e2c"><div class="ttname"><a href="namespace__qrbp__.html#a027dddf1d3cd51fc6ac58652d0350e2c">_qrbp_::update_states_to_biplane_quaternion_gmk</a></div><div class="ttdeci">void update_states_to_biplane_quaternion_gmk(const Eigen::Quaterniond q_q, const Vector3d omega, Vector3d &amp;eta_b, Vector3d &amp;omega_b)</div><div class="ttdoc">Code written by Giri Mugundan Kumar to switch states - yet to be debugged.</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00438">qrbp.hpp:438</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a0359466cb9bea594e2a2f0c1024821c3"><div class="ttname"><a href="namespace__qrbp__.html#a0359466cb9bea594e2a2f0c1024821c3">_qrbp_::D_filter_pitch_dot_ref</a></div><div class="ttdeci">const double D_filter_pitch_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00187">qrbp.hpp:187</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a03a7f930931d27a2301ad7f33fb1cd9b"><div class="ttname"><a href="namespace__qrbp__.html#a03a7f930931d27a2301ad7f33fb1cd9b">_qrbp_::PLANFORM_AREA_S</a></div><div class="ttdeci">constexpr double PLANFORM_AREA_S</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00088">qrbp.hpp:88</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a0e2c16559d45c17bb872a649e39996c7"><div class="ttname"><a href="namespace__qrbp__.html#a0e2c16559d45c17bb872a649e39996c7">_qrbp_::DEG2RAD</a></div><div class="ttdeci">constexpr double DEG2RAD</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00074">qrbp.hpp:74</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a115c08f79c3b00a7fafd96b25a2a03d5"><div class="ttname"><a href="namespace__qrbp__.html#a115c08f79c3b00a7fafd96b25a2a03d5">_qrbp_::PITCH_90</a></div><div class="ttdeci">const Eigen::Quaterniond PITCH_90</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00289">qrbp.hpp:289</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a14a65c809ae65853db30236672cdeb69"><div class="ttname"><a href="namespace__qrbp__.html#a14a65c809ae65853db30236672cdeb69">_qrbp_::LX</a></div><div class="ttdeci">constexpr double LX</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00080">qrbp.hpp:80</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a16128c118202e0054e8da9c53add9431"><div class="ttname"><a href="namespace__qrbp__.html#a16128c118202e0054e8da9c53add9431">_qrbp_::MAX_THRUST</a></div><div class="ttdeci">constexpr double MAX_THRUST</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00105">qrbp.hpp:105</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a17285ac2aa833a31855a2948e28b695e"><div class="ttname"><a href="namespace__qrbp__.html#a17285ac2aa833a31855a2948e28b695e">_qrbp_::update_states_to_biplane_mode</a></div><div class="ttdeci">void update_states_to_biplane_mode(const Vector3d eta, const Vector3d omega, Vector3d &amp;eta_b, Vector3d &amp;omega_b)</div><div class="ttdoc">Inline Function to update the biplane mode states - Goes in the inner loop bridge.</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00351">qrbp.hpp:351</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a1bc43e03a3a0481dc8671bc46f22ffc3"><div class="ttname"><a href="namespace__qrbp__.html#a1bc43e03a3a0481dc8671bc46f22ffc3">_qrbp_::D_filter_yaw_dot_ref</a></div><div class="ttdeci">const double D_filter_yaw_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00203">qrbp.hpp:203</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a1be205350995c0243c2a2653f5a9966f"><div class="ttname"><a href="namespace__qrbp__.html#a1be205350995c0243c2a2653f5a9966f">_qrbp_::B_filter_roll_ref</a></div><div class="ttdeci">const Eigen::Vector2d B_filter_roll_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00117">qrbp.hpp:117</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a20eac4ebd127b9deb6e144467c7f88e8"><div class="ttname"><a href="namespace__qrbp__.html#a20eac4ebd127b9deb6e144467c7f88e8">_qrbp_::C_filter_roll_ref</a></div><div class="ttdeci">const Eigen::RowVector2d C_filter_roll_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00120">qrbp.hpp:120</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a293c931417a6190d4ce511cc52e92a29"><div class="ttname"><a href="namespace__qrbp__.html#a293c931417a6190d4ce511cc52e92a29">_qrbp_::B_filter_yaw_dot_ref</a></div><div class="ttdeci">const Eigen::Vector2d B_filter_yaw_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00197">qrbp.hpp:197</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a2a70d9b932f1d54d18351ce839dbc66c"><div class="ttname"><a href="namespace__qrbp__.html#a2a70d9b932f1d54d18351ce839dbc66c">_qrbp_::SPAN_S</a></div><div class="ttdeci">constexpr double SPAN_S</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00085">qrbp.hpp:85</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a2c90677d0b37596256b17b23c52c1808"><div class="ttname"><a href="namespace__qrbp__.html#a2c90677d0b37596256b17b23c52c1808">_qrbp_::CT_MOTOR</a></div><div class="ttdeci">constexpr double CT_MOTOR</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00104">qrbp.hpp:104</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a2f90fcde755bd3384e29669e3b7feb65"><div class="ttname"><a href="namespace__qrbp__.html#a2f90fcde755bd3384e29669e3b7feb65">_qrbp_::RHO_HAT</a></div><div class="ttdeci">constexpr double RHO_HAT</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00071">qrbp.hpp:71</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a301c47e4a5be858762dc907646e7c130"><div class="ttname"><a href="namespace__qrbp__.html#a301c47e4a5be858762dc907646e7c130">_qrbp_::D_filter_pitch_ref</a></div><div class="ttdeci">const double D_filter_pitch_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00139">qrbp.hpp:139</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a315aff83c02622065bf0475fd8d63a95"><div class="ttname"><a href="namespace__qrbp__.html#a315aff83c02622065bf0475fd8d63a95">_qrbp_::LZ_S</a></div><div class="ttdeci">constexpr double LZ_S</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00082">qrbp.hpp:82</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a32ddaef38e7f03bf4e1153045e9f600d"><div class="ttname"><a href="namespace__qrbp__.html#a32ddaef38e7f03bf4e1153045e9f600d">_qrbp_::A_filter_yaw_ref</a></div><div class="ttdeci">const Eigen::Matrix2d A_filter_yaw_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00143">qrbp.hpp:143</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a35d6199337b785517716f79083bc6f14"><div class="ttname"><a href="namespace__qrbp__.html#a35d6199337b785517716f79083bc6f14">_qrbp_::MIN_THRUST</a></div><div class="ttdeci">constexpr double MIN_THRUST</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00106">qrbp.hpp:106</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a3735101a9afb01baff19d399ba786ccb"><div class="ttname"><a href="namespace__qrbp__.html#a3735101a9afb01baff19d399ba786ccb">_qrbp_::PLANFORM_AREA_W</a></div><div class="ttdeci">constexpr double PLANFORM_AREA_W</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00087">qrbp.hpp:87</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a39047d7544cf31527dcb6a659b6625a3"><div class="ttname"><a href="namespace__qrbp__.html#a39047d7544cf31527dcb6a659b6625a3">_qrbp_::CHORD_S</a></div><div class="ttdeci">constexpr double CHORD_S</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00086">qrbp.hpp:86</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a3a80c85644b880f110435dc327db3da4"><div class="ttname"><a href="namespace__qrbp__.html#a3a80c85644b880f110435dc327db3da4">_qrbp_::DYN_PRESS_COEFF_W</a></div><div class="ttdeci">constexpr double DYN_PRESS_COEFF_W</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00091">qrbp.hpp:91</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a4f413e588094233ae2130575272e7e4f"><div class="ttname"><a href="namespace__qrbp__.html#a4f413e588094233ae2130575272e7e4f">_qrbp_::update_states_to_biplane_quaternions</a></div><div class="ttdeci">void update_states_to_biplane_quaternions(const Eigen::Quaterniond q_q, const Vector3d omega, Vector3d &amp;eta_b, Vector3d &amp;omega_b)</div><div class="ttdoc">Code from the PX4 Repository to switch states - might need debugging.</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00504">qrbp.hpp:504</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a4f92c6517a0583a360887945dd885c4c"><div class="ttname"><a href="namespace__qrbp__.html#a4f92c6517a0583a360887945dd885c4c">_qrbp_::SQRT2_OVER_2</a></div><div class="ttdeci">constexpr double SQRT2_OVER_2</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00076">qrbp.hpp:76</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a553d7983576b516e388a99ea41277726"><div class="ttname"><a href="namespace__qrbp__.html#a553d7983576b516e388a99ea41277726">_qrbp_::B_filter_roll_dot_ref</a></div><div class="ttdeci">const Eigen::Vector2d B_filter_roll_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00165">qrbp.hpp:165</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a5dd4ffe99189f5f603de6b0925bc8097"><div class="ttname"><a href="namespace__qrbp__.html#a5dd4ffe99189f5f603de6b0925bc8097">_qrbp_::is_biplane</a></div><div class="ttdeci">bool is_biplane</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00098">qrbp.hpp:98</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a5f587d392cc2d9e31cd82e13558b5f09"><div class="ttname"><a href="namespace__qrbp__.html#a5f587d392cc2d9e31cd82e13558b5f09">_qrbp_::MASS</a></div><div class="ttdeci">constexpr double MASS</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00079">qrbp.hpp:79</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a5f7c243b0bb59c6889db2c66268d853d"><div class="ttname"><a href="namespace__qrbp__.html#a5f7c243b0bb59c6889db2c66268d853d">_qrbp_::G</a></div><div class="ttdeci">constexpr double G</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00070">qrbp.hpp:70</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a68c98faee9040aad0afefac8a3fd5e4b"><div class="ttname"><a href="namespace__qrbp__.html#a68c98faee9040aad0afefac8a3fd5e4b">_qrbp_::A_filter_yaw_dot_ref</a></div><div class="ttdeci">const Eigen::Matrix2d A_filter_yaw_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00191">qrbp.hpp:191</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a74b34d611525bc7af8c4cb193f0fb777"><div class="ttname"><a href="namespace__qrbp__.html#a74b34d611525bc7af8c4cb193f0fb777">_qrbp_::B_filter_yaw_ref</a></div><div class="ttdeci">const Eigen::Vector2d B_filter_yaw_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00149">qrbp.hpp:149</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a750efc0a0bf005066afc18dc5aab039b"><div class="ttname"><a href="namespace__qrbp__.html#a750efc0a0bf005066afc18dc5aab039b">_qrbp_::e3_basis</a></div><div class="ttdeci">static const Eigen::Vector3d e3_basis</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00220">qrbp.hpp:220</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a814b12b3e16fadcba1dd779db1e3fb30"><div class="ttname"><a href="namespace__qrbp__.html#a814b12b3e16fadcba1dd779db1e3fb30">_qrbp_::B_filter_pitch_ref</a></div><div class="ttdeci">const Eigen::Vector2d B_filter_pitch_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00133">qrbp.hpp:133</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a89bb354328277a75778810b684dac189"><div class="ttname"><a href="namespace__qrbp__.html#a89bb354328277a75778810b684dac189">_qrbp_::A_filter_roll_ref</a></div><div class="ttdeci">const Eigen::Matrix2d A_filter_roll_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00111">qrbp.hpp:111</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a89bd0ca7f8b93ef0594a83ba75da00db"><div class="ttname"><a href="namespace__qrbp__.html#a89bd0ca7f8b93ef0594a83ba75da00db">_qrbp_::thrust_polynomial_coeff_qrbp</a></div><div class="ttdeci">const Eigen::VectorXd thrust_polynomial_coeff_qrbp</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00208">qrbp.hpp:208</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a8b76f83abd70b8e0bbaa5c86aa127657"><div class="ttname"><a href="namespace__qrbp__.html#a8b76f83abd70b8e0bbaa5c86aa127657">_qrbp_::SPAN_W</a></div><div class="ttdeci">constexpr double SPAN_W</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00083">qrbp.hpp:83</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a8d7d01f6faf55a0e2cc1d5a824c6f5d3"><div class="ttname"><a href="namespace__qrbp__.html#a8d7d01f6faf55a0e2cc1d5a824c6f5d3">_qrbp_::mixer_matrix_qrbp</a></div><div class="ttdeci">const Eigen::Matrix4d mixer_matrix_qrbp</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00229">qrbp.hpp:229</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a8fce535ee56720166df0f16eeb940141"><div class="ttname"><a href="namespace__qrbp__.html#a8fce535ee56720166df0f16eeb940141">_qrbp_::inertia_matrix_b</a></div><div class="ttdeci">const Eigen::Matrix3d inertia_matrix_b</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00270">qrbp.hpp:270</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a8fdaaf41a9523665cee3cdc96ccd5dc9"><div class="ttname"><a href="namespace__qrbp__.html#a8fdaaf41a9523665cee3cdc96ccd5dc9">_qrbp_::LY</a></div><div class="ttdeci">constexpr double LY</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00081">qrbp.hpp:81</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_a927eebbfaa28b1ccd4635146702eb327"><div class="ttname"><a href="namespace__qrbp__.html#a927eebbfaa28b1ccd4635146702eb327">_qrbp_::PITCH_90_INV</a></div><div class="ttdeci">const Eigen::Quaterniond PITCH_90_INV</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00290">qrbp.hpp:290</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_aa409fec80992204c03412d6b864353ad"><div class="ttname"><a href="namespace__qrbp__.html#aa409fec80992204c03412d6b864353ad">_qrbp_::R_Jq_Jb</a></div><div class="ttdeci">const Eigen::Matrix3d R_Jq_Jb</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00277">qrbp.hpp:277</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_aa86e03282fb199d95f9cc8391a8bcaf1"><div class="ttname"><a href="namespace__qrbp__.html#aa86e03282fb199d95f9cc8391a8bcaf1">_qrbp_::RAD2DEG</a></div><div class="ttdeci">constexpr double RAD2DEG</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00075">qrbp.hpp:75</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_aae88f603e9dc67167056860c535be199"><div class="ttname"><a href="namespace__qrbp__.html#aae88f603e9dc67167056860c535be199">_qrbp_::D_filter_yaw_ref</a></div><div class="ttdeci">const double D_filter_yaw_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00155">qrbp.hpp:155</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_aaf33c55a6b6c786ccff929242a043ba3"><div class="ttname"><a href="namespace__qrbp__.html#aaf33c55a6b6c786ccff929242a043ba3">_qrbp_::B_filter_pitch_dot_ref</a></div><div class="ttdeci">const Eigen::Vector2d B_filter_pitch_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00181">qrbp.hpp:181</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ab5363150d86811a10f7f464b4746586e"><div class="ttname"><a href="namespace__qrbp__.html#ab5363150d86811a10f7f464b4746586e">_qrbp_::A_filter_roll_dot_ref</a></div><div class="ttdeci">const Eigen::Matrix2d A_filter_roll_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00159">qrbp.hpp:159</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ab8fcdc02cf2bd196529e2d25eb86c60c"><div class="ttname"><a href="namespace__qrbp__.html#ab8fcdc02cf2bd196529e2d25eb86c60c">_qrbp_::C_filter_yaw_dot_ref</a></div><div class="ttdeci">const Eigen::RowVector2d C_filter_yaw_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00200">qrbp.hpp:200</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_aba0dca121a4bbee590e274e4ee57b7a5"><div class="ttname"><a href="namespace__qrbp__.html#aba0dca121a4bbee590e274e4ee57b7a5">_qrbp_::D_filter_roll_dot_ref</a></div><div class="ttdeci">const double D_filter_roll_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00171">qrbp.hpp:171</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_abaa1664101f50e96cc2a7ec4cbb273dc"><div class="ttname"><a href="namespace__qrbp__.html#abaa1664101f50e96cc2a7ec4cbb273dc">_qrbp_::C_filter_roll_dot_ref</a></div><div class="ttdeci">const Eigen::RowVector2d C_filter_roll_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00168">qrbp.hpp:168</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_abd629164f9bea744e1b4f9d58453b8f8"><div class="ttname"><a href="namespace__qrbp__.html#abd629164f9bea744e1b4f9d58453b8f8">_qrbp_::C_filter_yaw_ref</a></div><div class="ttdeci">const Eigen::RowVector2d C_filter_yaw_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00152">qrbp.hpp:152</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_abea3f384cca1192a7f2406d6f520cf2f"><div class="ttname"><a href="namespace__qrbp__.html#abea3f384cca1192a7f2406d6f520cf2f">_qrbp_::A_filter_pitch_dot_ref</a></div><div class="ttdeci">const Eigen::Matrix2d A_filter_pitch_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00175">qrbp.hpp:175</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ac02b3e0d88a023a9bca113bb0cb49251"><div class="ttname"><a href="namespace__qrbp__.html#ac02b3e0d88a023a9bca113bb0cb49251">_qrbp_::C_filter_pitch_ref</a></div><div class="ttdeci">const Eigen::RowVector2d C_filter_pitch_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00136">qrbp.hpp:136</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ac0e715682ae309aae325a75b24ba13f3"><div class="ttname"><a href="namespace__qrbp__.html#ac0e715682ae309aae325a75b24ba13f3">_qrbp_::A_filter_pitch_ref</a></div><div class="ttdeci">const Eigen::Matrix2d A_filter_pitch_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00127">qrbp.hpp:127</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ad01ba6618f08d2e501fcbbe595c6eaba"><div class="ttname"><a href="namespace__qrbp__.html#ad01ba6618f08d2e501fcbbe595c6eaba">_qrbp_::PIHALF</a></div><div class="ttdeci">constexpr double PIHALF</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00073">qrbp.hpp:73</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ad1c9916882f4ff164e65de5034c3ce0a"><div class="ttname"><a href="namespace__qrbp__.html#ad1c9916882f4ff164e65de5034c3ce0a">_qrbp_::PI</a></div><div class="ttdeci">constexpr double PI</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00072">qrbp.hpp:72</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ad388843399be6584cf48cb897aa18612"><div class="ttname"><a href="namespace__qrbp__.html#ad388843399be6584cf48cb897aa18612">_qrbp_::DYN_PRESS_COEFF_S</a></div><div class="ttdeci">constexpr double DYN_PRESS_COEFF_S</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00092">qrbp.hpp:92</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ad590826aa5ebaa1d0b8f3164f01aed94"><div class="ttname"><a href="namespace__qrbp__.html#ad590826aa5ebaa1d0b8f3164f01aed94">_qrbp_::D_filter_roll_ref</a></div><div class="ttdeci">const double D_filter_roll_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00123">qrbp.hpp:123</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_adf04463b176adb01aa1ed97dd5c6a234"><div class="ttname"><a href="namespace__qrbp__.html#adf04463b176adb01aa1ed97dd5c6a234">_qrbp_::momentary_button</a></div><div class="ttdeci">bool momentary_button</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00099">qrbp.hpp:99</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ae2a7f33803f7745860e2fd359ee24fce"><div class="ttname"><a href="namespace__qrbp__.html#ae2a7f33803f7745860e2fd359ee24fce">_qrbp_::R_Jb_Jq</a></div><div class="ttdeci">const Eigen::Matrix3d R_Jb_Jq</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00283">qrbp.hpp:283</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_ae6d362a87b0aecfdfd1904844368650b"><div class="ttname"><a href="namespace__qrbp__.html#ae6d362a87b0aecfdfd1904844368650b">_qrbp_::C_filter_pitch_dot_ref</a></div><div class="ttdeci">const Eigen::RowVector2d C_filter_pitch_dot_ref</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00184">qrbp.hpp:184</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_aeba510252724b0168a4fccdda154f537"><div class="ttname"><a href="namespace__qrbp__.html#aeba510252724b0168a4fccdda154f537">_qrbp_::CHORD_W</a></div><div class="ttdeci">constexpr double CHORD_W</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00084">qrbp.hpp:84</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_af509029e976bd7aee173e9e97fcf5752"><div class="ttname"><a href="namespace__qrbp__.html#af509029e976bd7aee173e9e97fcf5752">_qrbp_::AoS</a></div><div class="ttdeci">constexpr double AoS</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00095">qrbp.hpp:95</a></div></div>
<div class="ttc" id="anamespace__qrbp___html_afe1a3b1845ca273039fd22e8d695faea"><div class="ttname"><a href="namespace__qrbp__.html#afe1a3b1845ca273039fd22e8d695faea">_qrbp_::inertia_matrix_q</a></div><div class="ttdeci">const Eigen::Matrix3d inertia_matrix_q</div><div class="ttdef"><b>Definition:</b> <a href="qrbp_8hpp_source.html#l00261">qrbp.hpp:261</a></div></div>
<div class="ttc" id="anamespace__utilities___html_a4402ee1782f355ab0bda47407d327974"><div class="ttname"><a href="namespace__utilities__.html#a4402ee1782f355ab0bda47407d327974">_utilities_::rotationMatrix321LocalToGlobal</a></div><div class="ttdeci">Eigen::Matrix&lt; Scalar, 3, 3 &gt; rotationMatrix321LocalToGlobal(const Scalar roll, const Scalar pitch, const Scalar yaw)</div><div class="ttdoc">Function that computes the 321 rotation matrix that transforms a vector from local to global coordina...</div><div class="ttdef"><b>Definition:</b> <a href="helper__functions_8hpp_source.html#l00379">helper_functions.hpp:379</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
